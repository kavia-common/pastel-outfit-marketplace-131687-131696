{"is_source_file": true, "format": "TypeScript", "description": "This file defines a utility function `apiFetch` that wraps the native fetch API for making HTTP requests. It provides features like base URL handling, JSON serialization/deserialization, optional authentication headers, and error normalization. The function is used within an e-commerce frontend project to standardize API calls.", "external_files": ["./config"], "external_methods": ["APP.getApiBase"], "published": ["apiFetch", "ApiError"], "classes": [], "methods": [{"name": "export async function apiFetch<T>( apiFetch", "description": "An asynchronous function that performs a wrapped fetch request with support for base URL, query parameters, headers, body serialization, token authentication, and JSON response parsing.", "scope": "", "scopeKind": ""}], "calls": ["APP.getApiBase", "fetch", "Object.entries", "res.headers.get", "res.json"], "search-terms": ["apiFetch", "fetch wrapper", "base URL", "JSON handling", "authorization", "error normalization", "TypeScript", "HttpMethod"], "state": 2, "file_id": 13, "knowledge_revision": 62, "git_revision": "", "revision_history": [{"27": ""}, {"62": ""}], "ctags": [{"_type": "tag", "name": "ApiError", "path": "/home/kavia/workspace/code-generation/pastel-outfit-marketplace-131687-131696/ecommerce_frontend/src/lib/api.ts", "pattern": "/^export type ApiError = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "HttpMethod", "path": "/home/kavia/workspace/code-generation/pastel-outfit-marketplace-131687-131696/ecommerce_frontend/src/lib/api.ts", "pattern": "/^type HttpMethod = \"GET\" | \"POST\" | \"PUT\" | \"DELETE\";$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "apiFetch", "path": "/home/kavia/workspace/code-generation/pastel-outfit-marketplace-131687-131696/ecommerce_frontend/src/lib/api.ts", "pattern": "/^export async function apiFetch<T>($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/pastel-outfit-marketplace-131687-131696/ecommerce_frontend/src/lib/api.ts", "pattern": "/^  const base = APP.getApiBase();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "contentType", "path": "/home/kavia/workspace/code-generation/pastel-outfit-marketplace-131687-131696/ecommerce_frontend/src/lib/api.ts", "pattern": "/^  const contentType = res.headers.get(\"content-type\");$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/pastel-outfit-marketplace-131687-131696/ecommerce_frontend/src/lib/api.ts", "pattern": "/^  const data: unknown = isJson ? await res.json().catch(() => ({})) : {};$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "err", "path": "/home/kavia/workspace/code-generation/pastel-outfit-marketplace-131687-131696/ecommerce_frontend/src/lib/api.ts", "pattern": "/^    const err = (data as ApiError) || { message: res.statusText };$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "headers", "path": "/home/kavia/workspace/code-generation/pastel-outfit-marketplace-131687-131696/ecommerce_frontend/src/lib/api.ts", "pattern": "/^  const headers: Record<string, string> = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "isJson", "path": "/home/kavia/workspace/code-generation/pastel-outfit-marketplace-131687-131696/ecommerce_frontend/src/lib/api.ts", "pattern": "/^  const isJson = !!contentType && contentType.includes(\"application\\/json\");$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/pastel-outfit-marketplace-131687-131696/ecommerce_frontend/src/lib/api.ts", "pattern": "/^  const res = await fetch(url.toString(), {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/pastel-outfit-marketplace-131687-131696/ecommerce_frontend/src/lib/api.ts", "pattern": "/^  const url = new URL(path.startsWith(\"http\") ? path : `${base}${path}`);$/", "language": "TypeScript", "kind": "constant"}], "hash": "4ef38216b54f735b70a8e7b26f644f54", "format-version": 4, "code-base-name": "ecommerce_frontend", "filename": "ecommerce_frontend/src/lib/api.ts"}